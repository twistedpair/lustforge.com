<!doctype html><html prefix="og: http://ogp.me/ns#"><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><title>GWT JSNI Variables – An Exhaustive List &#183; </title><meta name=description content="As anyone using the Google Web Toolkit JSNI knows, there are certain reserved variables, or “dollar words,” exposed by the GWT runtime. While you may be familiar with $wnd and $doc, there are more undocumented words. See the exhaustive (as of GWT 2.5.0) list below taken from source.
$wnd
Reference to the root browser window GWT widgets are being rendered to. Note that when called from the iframe linker, GWT code runs in an iframe, not the root browser window, so calling window will reference the wrong window."><meta name=HandheldFriendly content="True"><meta name=MobileOptimized content="320"><meta name=generator content="Hugo 0.140.2"><meta name=robots content="index,follow"><meta name=viewport content="width=device-width,initial-scale=1"><meta property="og:title" content="GWT JSNI Variables – An Exhaustive List"><meta property="og:description" content="As anyone using the Google Web Toolkit JSNI knows, there are certain reserved variables, or “dollar words,” exposed by the GWT runtime. While you may be familiar with $wnd and $doc, there are more undocumented words. See the exhaustive (as of GWT 2.5.0) list below taken from source.
$wnd
Reference to the root browser window GWT widgets are being rendered to. Note that when called from the iframe linker, GWT code runs in an iframe, not the root browser window, so calling window will reference the wrong window."><meta property="og:type" content="article"><meta property="og:url" content="https://lust.dev/2012/11/11/gwt-jsni-variables-an-exhaustive-list/"><link rel=stylesheet href=https://lust.dev/dist/site.css><link rel=stylesheet href=https://lust.dev/dist/syntax.css><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,400,600,700,300&subset=latin,cyrillic-ext,latin-ext,cyrillic"><link rel=stylesheet href=https://lust.dev//css/font-awesome-all.min.css></head><body><script async src="https://www.googletagmanager.com/gtag/js?id=G-W625CVG5Q9"></script><script>var dnt,doNotTrack=!1;if(!0&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-W625CVG5Q9")}</script><div id=wrapper><header class=site-header><div class=container><div class=site-title-wrapper><h1 class=site-title><a href=https://lust.dev/>lust.dev</a></h1><a class=button-square href=https://lust.dev/index.xml aria-label=RSS><i class="fa fa-rss" aria-hidden=true></i></a>
<a class="button-square button-social hint--top" data-hint=Bluesky aria-label=bluesky href=https://bsky.app/profile/lust.dev rel=me><i class="fa-brands fa-bluesky" aria-hidden=true></i>
</a><a class="button-square button-social hint--top" data-hint=Github aria-label=Github href=https://github.com/twistedpair rel=me><i class="fa-brands fa-github-alt" aria-hidden=true></i>
</a><a class="button-square button-social hint--top" data-hint="Stack Overflow" aria-label="Stack Overflow" href=https://stackoverflow.com/users/564157/joseph-lust rel=me><i class="fa-brands fa-stack-overflow" aria-hidden=true></i>
</a><a class="button-square button-social hint--top" data-hint=LinkedIn aria-label=LinkedIn href=https://linkedin.com/in/josephlust rel=me><i class="fa-brands fa-linkedin" aria-hidden=true></i></a></div><ul class=site-nav><li class=site-nav-item><a href=../../../../>Blog</a></li><li class=site-nav-item><a href=../../../../tags>Tags</a></li><li class=site-nav-item><a href=../../../../about>About J. Lust</a></li></ul></div></header><div id=container><div class=container><article class=post-container itemscope itemtype=http://schema.org/BlogPosting><header class=post-header><h1 class=post-title itemprop="name headline">GWT JSNI Variables – An Exhaustive List</h1><p class=post-date><span>Published <time datetime=2012-11-11 itemprop=datePublished>11 Nov '12</time></span>
<span>by</span>
<span itemscope itemprop=author itemtype=https://schema.org/Person><span itemprop=name><a href=# itemprop=url rel=author>Joseph Lust</a></span></span></p><p class="post-reading post-line"><span>⏰ 2 min read</span></p></header><div class="post-content clearfix" itemprop=articleBody><p>As anyone using the <a href=https://developers.google.com/web-toolkit/doc/latest/DevGuideCodingBasicsJSNI>Google Web Toolkit JSNI</a> knows, there are certain reserved variables, or “dollar words,” exposed by the GWT runtime. While you may be familiar with <code>$wnd</code> and <code>$doc</code>, there are more undocumented words. See the exhaustive (as of GWT <code>2.5.0</code>) list below taken from <a href="http://code.google.com/p/google-web-toolkit/source/browse/trunk/dev/core/src/com/google/gwt/dev/js/ast/JsRootScope.java?r=9287">source</a>.</p><h3 id=wnd>$wnd</h3><p>Reference to the root browser window GWT widgets are being rendered to. Note that when called from the iframe linker, GWT code runs in an iframe, not the root browser window, so calling window will reference the wrong window.</p><h3 id=doc>$doc</h3><p>Same as above, but referencing the document, not window. Same as <code>$wnd.document</code>.</p><h3 id=gwt_version>$gwt_version</h3><p>The X.Y.Z version of GWT this code was compiled with. Because Google uses the GWT trunk in their apps, they will return <code>0.0.999</code>.</p><h3 id=modulename>$moduleName</h3><p>The name of the compiled GWT module. Note, you may have assumed this was obfuscated. It’s not.</p><h3 id=modulebase>$moduleBase</h3><p>The root URL for this module’s entrypoint.</p><h3 id=strongname>$strongName</h3><p>The MD5 hash for this module.</p><h3 id=hosted>$hosted</h3><p>Url and port of code server in hosted mode. i.e. <code>127.0.0.1:9997</code>.</p><h3 id=hostedhtml-version>$hostedHtml Version</h3><p>Version of hosted HTML page (hosted.html) in use. This is the page that shows error traces in browser in hosted mode.</p><h3 id=sessionid>$sessionId</h3><p>Used when collecting stats in hosted mode. Same value as <code>window.__gwt_SessionID</code></p><h3 id=stats>$stats()</h3><p>Undocumented. Used to collect stats in hosted mode.</p><h3 id=entry>$entry()</h3><p>Method that makes code reentry safe. This should wrap GWT code that will be called from outside of GWT via Javascript calls you wish to expose from your GWT application. See docs for more.</p><h3 id=stack-stackdepth-location>$stack, $stackDepth, $location</h3><p>Undocumented. Trace information used by JsStackEmulator.</p><h2 id=example-of-accessing-gwt-version>Example of accessing GWT Version</h2><p>To determine the running version of a GWT application, you can use JSNI to return that version.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>// easily get the GWT version</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>public</span><span class=w> </span><span class=kd>static</span><span class=w> </span><span class=kd>native</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=nf>getGwtVersion</span><span class=p>()</span><span class=w> </span><span class=cm>/*-{
</span></span></span><span class=line><span class=cl><span class=cm>    return $gwt_version;
</span></span></span><span class=line><span class=cl><span class=cm>}-*/</span><span class=p>;</span><span class=w>
</span></span></span></code></pre></div><p>From outside the application you can walk the DOM of the page to find the iframe containing the running GWT code and access the version like below.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kd>var</span> <span class=nx>gwtVersion</span> <span class=o>=</span> <span class=kc>null</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=nx>frames</span> <span class=o>=</span> <span class=nb>document</span><span class=p>.</span><span class=nx>getElementsByTagName</span><span class=p>(</span><span class=s1>&#39;iframe&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=p>(</span><span class=kd>var</span> <span class=nx>i</span><span class=o>=</span><span class=mi>0</span><span class=p>;</span> <span class=nx>i</span><span class=o>&lt;</span><span class=nx>frames</span><span class=p>.</span><span class=nx>length</span><span class=p>;</span> <span class=nx>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// prevent security access errors
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=k>try</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span><span class=p>(</span><span class=nx>frames</span><span class=p>[</span><span class=nx>i</span><span class=p>].</span><span class=nx>contentWindow</span><span class=p>.</span><span class=nx>$gwt_version</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>gwtVersion</span> <span class=o>=</span> <span class=nx>frames</span><span class=p>[</span><span class=nx>i</span><span class=p>].</span><span class=nx>contentWindow</span><span class=p>.</span><span class=nx>$gwt_version</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=k>break</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=k>catch</span><span class=p>(</span><span class=nx>e</span><span class=p>)</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>This is the mechanism I used to detect GWT apps in the <a href=https://chrome.google.com/webstore/detail/library-detector/cgaocdmhkmfnkdkbnckgmpopcbpaaejo>Library Detector Chrome Extension</a> (<a href=https://github.com/twistedpair/Library-Detector-for-Chrome>Github</a>). Note the wrapping in a <code>try/catch</code>. This is because some iframes are cross domain and will throw a security exception if you try to access them.</p></div><footer class="post-footer clearfix"><p class=post-tags><span>Tagged:</span>
<a href=../../../../tags/google-web-toolkit-gwt/>Google Web Toolkit (GWT)</a>,
<a href=../../../../tags/java/>Java</a></p><div class=share><a class=icon-twitter href="https://twitter.com/share?text=GWT%20JSNI%20Variables%20%e2%80%93%20An%20Exhaustive%20List&url=https%3a%2f%2flust.dev%2f2012%2f11%2f11%2fgwt-jsni-variables-an-exhaustive-list%2f" onclick='return window.open(this.href,"twitter-share","width=550,height=235"),!1' aria-label="Share on Twitter"><i class="fa fa-twitter" aria-hidden=true></i>
</a><a class=icon-facebook href="https://www.facebook.com/sharer/sharer.php?u=https%3a%2f%2flust.dev%2f2012%2f11%2f11%2fgwt-jsni-variables-an-exhaustive-list%2f" onclick='return window.open(this.href,"facebook-share","width=580,height=296"),!1' aria-label="Share on Facebook"><i class="fa fa-facebook" aria-hidden=true></i></a></div></footer><div class=comments><div id=disqus_thread></div><script>window.disqus_config=function(){},function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="//lustforge.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div></article></div></div></div><footer class=footer><div class=container><div class=site-title-wrapper><h1 class=site-title><a href=https://lust.dev/>lust.dev</a></h1><a class="button-square button-jump-top js-jump-top" href=# aria-label="Back to Top"><i class="fa fa-angle-up" aria-hidden=true></i></a></div><p class=footer-copyright><span>&copy; 2024 / Powered by <a href=https://gohugo.io/>Hugo</a></span></p><p class=footer-copyright><span><a href=https://github.com/roryg/ghostwriter>Ghostwriter theme</a> By <a href=http://jollygoodthemes.com>JollyGoodThemes</a></span>
<span>/ <a href=https://github.com/jbub/ghostwriter>Ported</a> to Hugo By <a href=https://github.com/jbub>jbub</a></span></p></div></footer><script src=https://lust.dev/js/jquery-1.11.3.min.js></script><script src=https://lust.dev/js/jquery.fitvids.js></script><script src=https://lust.dev/js/scripts.js></script></body></html>