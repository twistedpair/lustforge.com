---
draft: false
title: "gcloud SDK 208.0.1 Release Analysis"
author: Joe Lust
layout: post
date: 2018-07-11
url: /gcloud/gcloud-sdk-208-0-1-release-analysis/
summary: "This `208.0.1` release is a hotfix specifically addressing `gcloud dataproc` crashes. The fix involved significant refactoring of the internal YAML processing for Dataproc workflow templates, leading to the removal of the `--source` and `--destination` CLI flags and associated schema validation logic."
tags:
  - gcloud
  - google-cloud-platform
  - release-analysis
  - gcp
---

This `208.0.1` release is a hotfix specifically addressing `gcloud dataproc` crashes. The fix involved significant refactoring of the internal YAML processing for Dataproc workflow templates, leading to the removal of the `--source` and `--destination` CLI flags and associated schema validation logic.

**Jump to:** [Annotated Release Notes](#breaking-changes) | [Unannounced Changes üïµÔ∏è](#unannounced-changes) | [Stats üìä](#stats)

<!--more-->

## Breaking Changes

- The `--source` flag for `gcloud dataproc workflow-templates` commands (e.g., `import`) has been removed, altering how workflow templates are loaded from YAML files.
  - File: [flags.py:51](https://github.com/twistedpair/google-cloud-sdk/blob/208.0.1/google-cloud-sdk/lib/googlecloudsdk/command_lib/dataproc/flags.py#L51)
- The `--destination` flag for `gcloud dataproc workflow-templates export` has been removed, altering how workflow templates are saved to YAML files.
  - File: [flags.py:65](https://github.com/twistedpair/google-cloud-sdk/blob/208.0.1/google-cloud-sdk/lib/googlecloudsdk/command_lib/dataproc/flags.py#L65)

## API Changes

### Dataproc

- The internal `ReadYaml` function in `lib/googlecloudsdk/api_lib/dataproc/util.py` has been refactored. It now directly accepts a `file_path` instead of a `stream` and no longer supports `schema_path` for validation, leveraging `yaml.load_path` from `googlecloudsdk.core.yaml`. The error message format has also changed.
  - File: [util.py:515](https://github.com/twistedpair/google-cloud-sdk/blob/208.0.1/google-cloud-sdk/lib/googlecloudsdk/api_lib/dataproc/util.py#L515)
- The internal `WriteYaml` function in `lib/googlecloudsdk/api_lib/dataproc/util.py` has been refactored. It now directly accepts a `file_path` instead of a `stream` and no longer supports a `filter_function` for output fields.
  - File: [util.py:549](https://github.com/twistedpair/google-cloud-sdk/blob/208.0.1/google-cloud-sdk/lib/googlecloudsdk/api_lib/dataproc/util.py#L549)
- The internal `MessageToYaml` helper function in `lib/googlecloudsdk/api_lib/dataproc/util.py` has been removed.
  - File: [util.py:557](https://github.com/twistedpair/google-cloud-sdk/blob/208.0.1/google-cloud-sdk/lib/googlecloudsdk/api_lib/dataproc/util.py#L557)
- The internal `_ValidateYaml` function and related schema validation logic (using `jsonschema`) in `lib/googlecloudsdk/api_lib/dataproc/util.py` have been removed.
  - File: [util.py:499](https://github.com/twistedpair/google-cloud-sdk/blob/208.0.1/google-cloud-sdk/lib/googlecloudsdk/api_lib/dataproc/util.py#L499)

## Unannounced Changes

*Changes found in code but not mentioned in official release notes:* üïµÔ∏è

### Refactoring

- Major refactoring of YAML handling in `lib/googlecloudsdk/api_lib/dataproc/util.py`, including the removal of `os`, `pkg_resources`, and `jsonschema` imports and the addition of `googlecloudsdk.core.util.files` and `six` imports.
  - File: [util.py:17](https://github.com/twistedpair/google-cloud-sdk/blob/208.0.1/google-cloud-sdk/lib/googlecloudsdk/api_lib/dataproc/util.py#L17)
- The `SCHEMA_DIR` constant, previously used for locating Dataproc YAML schemas, has been removed from `lib/googlecloudsdk/api_lib/dataproc/util.py`.
  - File: [util.py:36](https://github.com/twistedpair/google-cloud-sdk/blob/208.0.1/google-cloud-sdk/lib/googlecloudsdk/api_lib/dataproc/util.py#L36)
- Removal of `TEMPLATE_FIELDS` constant and the `Filter` function from `lib/googlecloudsdk/command_lib/dataproc/workflow_templates.py`, which were previously used for filtering output-only fields during workflow template export.
  - File: [workflow_templates.py:20](https://github.com/twistedpair/google-cloud-sdk/blob/208.0.1/google-cloud-sdk/lib/googlecloudsdk/command_lib/dataproc/workflow_templates.py#L20)
- The copyright year in `lib/googlecloudsdk/command_lib/dataproc/flags.py` was corrected/reverted from 2018 to 2015.
  - File: [flags.py:1](https://github.com/twistedpair/google-cloud-sdk/blob/208.0.1/google-cloud-sdk/lib/googlecloudsdk/command_lib/dataproc/flags.py#L1)

## Stats

- Files changed: {{< color "#fff" "#b45309" >}}5{{< /color >}}
- Inserted lines: {{< color "#fff" "#166534" >}}+19{{< /color >}}
- Deleted lines: {{< color "#fff" "#991b1b" >}}-97{{< /color >}}

---
*Generated by [Gemini](https://ai.google.dev/)*
*- [View full diff](https://github.com/twistedpair/google-cloud-sdk/compare/208.0.0...208.0.1)*

*Google, Google Cloud, and gcloud are trademarks of Google LLC. This analysis was automatically generated by an AI agent examining only public release artifacts, without access to internal or non-public information from Google Cloud.*