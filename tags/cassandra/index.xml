<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Cassandra on lust.dev</title><link>https://lust.dev/tags/cassandra/</link><description>Recent content in Cassandra on lust.dev</description><generator>Hugo</generator><language>en-us</language><copyright>Joe Lust</copyright><lastBuildDate>Mon, 22 Jun 2015 00:00:00 +0000</lastBuildDate><atom:link href="https://lust.dev/tags/cassandra/index.xml" rel="self" type="application/rss+xml"/><item><title>Cassandra Errors: The UnSet Upsert</title><link>https://lust.dev/2015/06/22/cassandra-errors-the-unset-upsert/</link><pubDate>Mon, 22 Jun 2015 00:00:00 +0000</pubDate><guid>https://lust.dev/2015/06/22/cassandra-errors-the-unset-upsert/</guid><description>&lt;p&gt;During a late night coding session I got the following trace from the Datastax Cassandra Java Driver:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;com.datastax.driver.core.exceptions.SyntaxError: line 1:36 mismatched input &lt;span class="s1"&gt;&amp;#39;WHERE&amp;#39;&lt;/span&gt; expecting K_SET &lt;span class="o"&gt;(&lt;/span&gt;UPDATE my_table &lt;span class="o"&gt;[&lt;/span&gt;WHERE&lt;span class="o"&gt;]&lt;/span&gt; id...&lt;span class="o"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;at com.datastax.driver.core.Responses&lt;span class="nv"&gt;$Error&lt;/span&gt;.asException&lt;span class="o"&gt;(&lt;/span&gt;Responses.java:101&lt;span class="o"&gt;)&lt;/span&gt; ~&lt;span class="o"&gt;[&lt;/span&gt;cassandra-driver-core-2.1.5.jar:na&lt;span class="o"&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;at com.datastax.driver.core.DefaultResultSetFuture.onSet&lt;span class="o"&gt;(&lt;/span&gt;DefaultResultSetFuture.java:140&lt;span class="o"&gt;)&lt;/span&gt; ~&lt;span class="o"&gt;[&lt;/span&gt;cassandra-driver-core-2.1.5.jar:na&lt;span class="o"&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;at com.datastax.driver.core.RequestHandler.setFinalResult&lt;span class="o"&gt;(&lt;/span&gt;RequestHandler.java:293&lt;span class="o"&gt;)&lt;/span&gt; ~&lt;span class="o"&gt;[&lt;/span&gt;cassandra-driver-core-2.1.5.jar:na&lt;span class="o"&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;at com.datastax.driver.core.RequestHandler.onSet&lt;span class="o"&gt;(&lt;/span&gt;RequestHandler.java:455&lt;span class="o"&gt;)&lt;/span&gt; ~&lt;span class="o"&gt;[&lt;/span&gt;cassandra-driver-core-2.1.5.jar:na&lt;span class="o"&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;at com.datastax.driver.core.Connection&lt;span class="nv"&gt;$Dispatcher&lt;/span&gt;.messageReceived&lt;span class="o"&gt;(&lt;/span&gt;Connection.java:734&lt;span class="o"&gt;)&lt;/span&gt; ~&lt;span class="o"&gt;[&lt;/span&gt;cassandra-driver-core-2.1.5.jar:na&lt;span class="o"&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;at org.jboss.netty.channel.SimpleChannelUpstreamHandler.handleUpstream&lt;span class="o"&gt;(&lt;/span&gt;SimpleChannelUpstreamHandler.java:70&lt;span class="o"&gt;)&lt;/span&gt; ~&lt;span class="o"&gt;[&lt;/span&gt;netty-3.10.1.Final.jar:na&lt;span class="o"&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Ok. Let’s think it through:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Did we not put a key column in the &lt;code&gt;WHERE&lt;/code&gt; clause? Nope.&lt;/li&gt;
&lt;li&gt;Did we put a non-key column in the &lt;code&gt;WHERE&lt;/code&gt; clause? Nope.&lt;/li&gt;
&lt;li&gt;Did we put a key column in the &lt;code&gt;SET&lt;/code&gt; clause? Nope.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;OK, what then?&lt;/p&gt;</description></item></channel></rss>