<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Cassandra on lust.dev</title><link>https://lust.dev/tags/cassandra/</link><description>Recent content in Cassandra on lust.dev</description><generator>Hugo</generator><language>en-us</language><copyright>Joe Lust</copyright><lastBuildDate>Mon, 22 Jun 2015 00:00:00 +0000</lastBuildDate><atom:link href="https://lust.dev/tags/cassandra/index.xml" rel="self" type="application/rss+xml"/><item><title>Cassandra Errors: The UnSet Upsert</title><link>https://lust.dev/2015/06/22/cassandra-errors-the-unset-upsert/</link><pubDate>Mon, 22 Jun 2015 00:00:00 +0000</pubDate><guid>https://lust.dev/2015/06/22/cassandra-errors-the-unset-upsert/</guid><description>&lt;p>During a late night coding session I got the following trace from the Datastax Cassandra Java Driver:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">com.datastax.driver.core.exceptions.SyntaxError: line 1:36 mismatched input &lt;span class="s1">&amp;#39;WHERE&amp;#39;&lt;/span> expecting K_SET &lt;span class="o">(&lt;/span>UPDATE my_table &lt;span class="o">[&lt;/span>WHERE&lt;span class="o">]&lt;/span> id...&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">at com.datastax.driver.core.Responses&lt;span class="nv">$Error&lt;/span>.asException&lt;span class="o">(&lt;/span>Responses.java:101&lt;span class="o">)&lt;/span> ~&lt;span class="o">[&lt;/span>cassandra-driver-core-2.1.5.jar:na&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">at com.datastax.driver.core.DefaultResultSetFuture.onSet&lt;span class="o">(&lt;/span>DefaultResultSetFuture.java:140&lt;span class="o">)&lt;/span> ~&lt;span class="o">[&lt;/span>cassandra-driver-core-2.1.5.jar:na&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">at com.datastax.driver.core.RequestHandler.setFinalResult&lt;span class="o">(&lt;/span>RequestHandler.java:293&lt;span class="o">)&lt;/span> ~&lt;span class="o">[&lt;/span>cassandra-driver-core-2.1.5.jar:na&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">at com.datastax.driver.core.RequestHandler.onSet&lt;span class="o">(&lt;/span>RequestHandler.java:455&lt;span class="o">)&lt;/span> ~&lt;span class="o">[&lt;/span>cassandra-driver-core-2.1.5.jar:na&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">at com.datastax.driver.core.Connection&lt;span class="nv">$Dispatcher&lt;/span>.messageReceived&lt;span class="o">(&lt;/span>Connection.java:734&lt;span class="o">)&lt;/span> ~&lt;span class="o">[&lt;/span>cassandra-driver-core-2.1.5.jar:na&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">at org.jboss.netty.channel.SimpleChannelUpstreamHandler.handleUpstream&lt;span class="o">(&lt;/span>SimpleChannelUpstreamHandler.java:70&lt;span class="o">)&lt;/span> ~&lt;span class="o">[&lt;/span>netty-3.10.1.Final.jar:na&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Ok. Let’s think it through:&lt;/p>
&lt;ul>
&lt;li>Did we not put a key column in the &lt;code>WHERE&lt;/code> clause? Nope.&lt;/li>
&lt;li>Did we put a non-key column in the &lt;code>WHERE&lt;/code> clause? Nope.&lt;/li>
&lt;li>Did we put a key column in the &lt;code>SET&lt;/code> clause? Nope.&lt;/li>
&lt;/ul>
&lt;p>OK, what then?&lt;/p></description></item></channel></rss>